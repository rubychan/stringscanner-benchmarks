#!/usr/bin/env ruby

require 'benchmark'
require 'strscan'

MY_DIR = File.dirname(__FILE__)
$LOAD_PATH.unshift MY_DIR

Bench = Class.new

Benchmark.bm 30 do |bm|
  Dir.chdir MY_DIR do
    for benchmark in Dir["strscan/**/bm_#{ARGV.grep(/^[a-z]/).first}*.rb"].sort
      load benchmark
      bm.report File.basename(benchmark)[/\Abm_(.*?)\.rb/, 1] do
        Bench.run
      end
      puts
    end
  end
end
