#!/usr/bin/env ruby

require 'benchmark'
require 'strscan'

MY_DIR = File.dirname(__FILE__)
$LOAD_PATH.unshift MY_DIR

Bench = Class.new

puts "#{RUBY_ENGINE rescue 'ruby'} #{RUBY_VERSION} #{RUBY_RELEASE_DATE}"

Benchmark.bm 30 do |bm|
  Dir.chdir MY_DIR do
    for benchmark in Dir["strscan/bm_#{ARGV.first || '*'}.rb"].sort
      load benchmark
      bm.report File.basename(benchmark)[/\Abm_(.*?)\.rb/, 1] do
        Bench.run
      end
    end
  end
end